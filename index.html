<!doctype html>
<button onclick="autoLog()">ðŸ¤– AUTO LOG (GOD MODE)</button>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#0f172a"/>
  <link rel="manifest" href="manifest.json"/>
  <link rel="apple-touch-icon" href="icons/icon-192.png"/>
  <title>Macro Tracker</title>
  <style>
    :root{--bg:#0b1220;--card:#0f172a;--muted:#94a3b8;--text:#e2e8f0;--warn:#f59e0b;--line:#1f2a44;--chip:#111c33;}
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);}
    header{position:sticky;top:0;z-index:10;background:rgba(11,18,32,.9);backdrop-filter:blur(10px);padding:14px 16px;border-bottom:1px solid var(--line);}
    header h1{margin:0;font-size:18px;letter-spacing:.3px}
    header .sub{margin-top:6px;color:var(--muted);font-size:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    main{padding:14px 14px 90px;max-width:980px;margin:0 auto;display:grid;gap:12px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
    input,select,button{font:inherit}
    input,select{width:100%;padding:10px 10px;border-radius:12px;border:1px solid var(--line);background:#0b1530;color:var(--text);}
    .btn{padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:#122044;color:var(--text);font-weight:800}
    .btn.primary{background:#1d4ed8;border-color:#1d4ed8}
    .btn.good{background:#065f46;border-color:#065f46}
    .btn.bad{background:#7f1d1d;border-color:#7f1d1d}
    .pill{background:var(--chip);border:1px solid var(--line);padding:6px 10px;border-radius:999px;font-size:12px;color:var(--muted)}
    .split{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:900px){.split{grid-template-columns:1.1fr .9fr}}
    .bars{display:grid;gap:10px}
    .bar{background:#0b1530;border:1px solid var(--line);border-radius:12px;padding:10px}
    .bar .top{display:flex;justify-content:space-between;align-items:baseline;gap:10px}
    .bar .top b{font-size:13px}
    .bar .top small{color:var(--muted);white-space:nowrap}
    .meter{height:10px;background:#0a1022;border-radius:999px;overflow:hidden;margin-top:8px;border:1px solid #0f1b35}
    .fill{height:100%}
    .note{color:var(--muted);font-size:12px;line-height:1.4}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px 8px;border-bottom:1px solid var(--line);font-size:13px;text-align:left}
    .table th{color:var(--muted);font-weight:800}
    .hide{display:none !important}
    .seg{display:flex;gap:8px;flex-wrap:wrap}
    .seg button{flex:1;min-width:150px}
    .warnText{color:var(--warn);font-weight:900}
  </style>
</head>
<body>
<header>
  <h1>Macro Tracker</h1>
  <div class="sub">
    <span class="pill" id="statusPill">Offline-ready</span>
    <span class="pill" id="dayPill">Day: â€”</span>
    <span class="pill" id="datePill">Date: â€”</span>
    <span class="pill" id="libPill">Food Library: â€”</span>
  </div>
</header>

<main>
  <section class="card split">
    <div>
      <div class="seg">
        <button class="btn" id="modeLogBtn">Log</button>
        <button class="btn" id="modeLibraryBtn">Library</button>
        <button class="btn" id="modeGoalsBtn">Goals</button>
      </div>

      <div id="logMode" style="margin-top:10px">
        <div class="row">
          <div style="flex:1;min-width:160px"><label>Date</label><input id="logDate" type="date"/></div>
          <div style="flex:1;min-width:120px"><label>Day # (auto)</label><input id="dayNum" disabled/></div>
          <div style="flex:1;min-width:140px"><label>Meal/Snack</label>
            <select id="mealType"><option>Meal</option><option>Snack</option></select>
          </div>
          <div style="flex:1;min-width:140px"><label>Entry # (auto)</label><input id="entryNum" disabled/></div>
        </div>

        <div class="row" style="margin-top:10px">
          <div style="flex:2;min-width:220px"><label>Tell it what you're eating (matches saved foods)</label><input id="quickText" placeholder='e.g., "muscle milk shake"'/></div>
          <div style="flex:1;min-width:180px"><label>Or pick from library</label><select id="foodPick"></select></div>
        </div>

        <div class="row" style="margin-top:10px">
          <div style="flex:1;min-width:120px"><label>Calories</label><input id="cal" inputmode="decimal" placeholder="auto"/></div>
          <div style="flex:1;min-width:120px"><label>Protein</label><input id="pro" inputmode="decimal" placeholder="auto"/></div>
          <div style="flex:1;min-width:120px"><label>Carbs</label><input id="carb" inputmode="decimal" placeholder="auto"/></div>
          <div style="flex:1;min-width:120px"><label>Fat</label><input id="fat" inputmode="decimal" placeholder="auto"/></div>
        </div>

        <div class="row" style="margin-top:10px">
          <div style="flex:1;min-width:140px"><label>Fiber</label><input id="fiber" inputmode="decimal" placeholder="auto"/></div>
          <div style="flex:1;min-width:170px"><label>Soluble Fiber</label><input id="solFiber" inputmode="decimal" placeholder="auto"/></div>
          <div style="flex:1;min-width:170px"><label>Sat Fat</label><input id="satFat" inputmode="decimal" placeholder="auto"/></div>
        </div>

        <div class="row" style="margin-top:10px">
          <div style="flex:1;min-width:160px"><label>Servings (multiplies macros)</label><input id="servings" inputmode="decimal" value="1"/></div>
          <div style="flex:2;min-width:220px"><label>Notes / photo link (optional)</label><input id="notes" placeholder="paste link or notes"/></div>
        </div>

        <div class="row" style="margin-top:10px">
          <button class="btn primary" id="addBtn">Add entry</button>
          <button class="btn" id="scanBtn">Scan barcode</button>
          <button class="btn" id="saveAsFoodBtn">Save as Food</button>
          <button class="btn" id="exportBtn">Export CSV</button>
          <button class="btn bad" id="resetBtn">Reset day</button>
        </div>

        <p class="note" id="hint">On-device auto-macros works from your <b>Food Library</b>. First time: save the food once. After that: type it and it's automatic.</p>
      </div>

      <div id="libraryMode" class="hide" style="margin-top:10px">
        <div class="row">
          <div style="flex:2;min-width:220px"><label>Food name</label><input id="fName" placeholder="e.g., Muscle Milk 414mL"/></div>
          <div style="flex:1;min-width:180px"><label>Barcode (optional)</label><input id="fBarcode" placeholder="UPC/EAN"/></div>
        </div>
        <div class="row" style="margin-top:10px">
          <div style="flex:1;min-width:120px"><label>Calories</label><input id="fCal" inputmode="decimal"/></div>
          <div style="flex:1;min-width:120px"><label>Protein</label><input id="fPro" inputmode="decimal"/></div>
          <div style="flex:1;min-width:120px"><label>Carbs</label><input id="fCarb" inputmode="decimal"/></div>
          <div style="flex:1;min-width:120px"><label>Fat</label><input id="fFat" inputmode="decimal"/></div>
        </div>
        <div class="row" style="margin-top:10px">
          <div style="flex:1;min-width:140px"><label>Fiber</label><input id="fFiber" inputmode="decimal"/></div>
          <div style="flex:1;min-width:170px"><label>Soluble Fiber</label><input id="fSolFiber" inputmode="decimal"/></div>
          <div style="flex:1;min-width:170px"><label>Sat Fat</label><input id="fSatFat" inputmode="decimal"/></div>
        </div>
        <div class="row" style="margin-top:10px">
          <button class="btn good" id="addFoodBtn">Add/Update Food</button>
          <button class="btn" id="exportFoodsBtn">Export Foods</button>
          <button class="btn" id="importFoodsBtn">Import Foods</button>
        </div>
        <div style="overflow:auto;margin-top:8px">
          <table class="table" id="foodTable">
            <thead><tr><th>Food</th><th>Barcode</th><th>Cals</th><th>P</th><th>C</th><th>F</th><th>Fiber</th><th>Sol</th><th>Sat</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <div id="goalsMode" class="hide" style="margin-top:10px">
        <div class="row">
          <div style="flex:1;min-width:140px"><label>Calories</label><input id="gCal" inputmode="decimal"></div>
          <div style="flex:1;min-width:140px"><label>Protein</label><input id="gPro" inputmode="decimal"></div>
          <div style="flex:1;min-width:140px"><label>Carbs</label><input id="gCarb" inputmode="decimal"></div>
          <div style="flex:1;min-width:140px"><label>Fat</label><input id="gFat" inputmode="decimal"></div>
        </div>
        <div class="row" style="margin-top:10px">
          <div style="flex:1;min-width:160px"><label>Fiber</label><input id="gFiber" inputmode="decimal"></div>
          <div style="flex:1;min-width:180px"><label>Soluble Fiber</label><input id="gSolFiber" inputmode="decimal"></div>
          <div style="flex:1;min-width:180px"><label>Sat Fat max</label><input id="gSatFat" inputmode="decimal"></div>
        </div>
        <div class="row" style="margin-top:10px">
          <button class="btn primary" id="saveGoalsBtn">Save Goals</button>
        </div>
      </div>
    </div>

    <div>
      <div class="card" style="padding:12px;margin:0">
        <div class="row" style="justify-content:space-between;align-items:baseline">
          <b>Daily totals â€¢ Goals â€¢ Remaining</b>
          <small class="note" id="totalsSub">â€”</small>
        </div>
        <div class="bars" id="bars"></div>
        <p class="note" id="alerts"></p>
      </div>
    </div>
  </section>

  <section class="card">
    <div class="row" style="justify-content:space-between;align-items:flex-end">
      <div><b>Entries for selected date</b><div class="note">Tap an entry to edit/delete</div></div>
      <div class="row" style="gap:8px">
        <button class="btn" id="prevDayBtn">â—€</button>
        <button class="btn" id="todayBtn">Today</button>
        <button class="btn" id="nextDayBtn">â–¶</button>
      </div>
    </div>
    <div style="overflow:auto;margin-top:8px">
      <table class="table" id="entryTable">
        <thead><tr><th>Time</th><th>Meal</th><th>Food</th><th>Cals</th><th>P</th><th>C</th><th>F</th><th>Fiber</th><th>Sol</th><th>Sat</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>
</main>
<script>
async function autoLog(){

let food = prompt("Tell me what you ate:");

if(!food) return;

// AI processing placeholder (ChatGPT brain)
alert("GOD MODE analyzing: " + food);

// Later this will auto fill macros
}
</script>
<script src="app.js"></script>
</body>
</html>
